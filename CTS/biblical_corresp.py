from lxml import etree

def replace(orig):
    d = {('mat'): 'cts:urn:greekLit:tlg0031.tlg001',
        ('mark'): 'cts:urn:greekLit:tlg0031.tlg002',
         ('luke'): 'cts:urn:greekLit:tlg0031.tlg003',
         ('john'): 'cts:urn:greekLit:tlg0031.tlg004',
         ('acts'): 'cts:urn:greekLit:tlg0031.tlg005',
         ('rom'): 'cts:urn:greekLit:tlg0031.tlg006',
         ('1co'): 'cts:urn:greekLit:tlg0031.tlg007',
         ('2co'): 'cts:urn:greekLit:tlg0031.tlg008',
         ('gal'): 'cts:urn:greekLit:tlg0031.tlg009',
         ('eph'): 'cts:urn:greekLit:tlg0031.tlg010',
         ('philip'): 'cts:urn:greekLit:tlg0031.tlg011',
         ('col'): 'cts:urn:greekLit:tlg0031.tlg012',
         ('1th'): 'cts:urn:greekLit:tlg0031.tlg013',
         ('2th'): 'cts:urn:greekLit:tlg0031.tlg014',
         ('1ti'): 'cts:urn:greekLit:tlg0031.tlg015',
         ('2ti'): 'cts:urn:greekLit:tlg0031.tlg016',
         ('tit'): 'cts:urn:greekLit:tlg0031.tlg017',
         ('phm'): 'cts:urn:greekLit:tlg0031.tlg018',
         ('heb'): 'cts:urn:greekLit:tlg0031.tlg019',
         ('jam'): 'cts:urn:greekLit:tlg0031.tlg020',
         ('1pe'): 'cts:urn:greekLit:tlg0031.tlg021',
         ('2pe'): 'cts:urn:greekLit:tlg0031.tlg022',
         ('1jo'): 'cts:urn:greekLit:tlg0031.tlg023',
         ('2jo'): 'cts:urn:greekLit:tlg0031.tlg024',
         ('3jo'): 'cts:urn:greekLit:tlg0031.tlg025',
         ('jud'): 'cts:urn:greekLit:tlg0031.tlg026',
         ('rev'): 'cts:urn:greekLit:tlg0031.tlg027',
         ('gen'): 'cts:urn:greekLit:tlg0527.tlg001',
         ('exo'): 'cts:urn:greekLit:tlg0527.tlg002',
         ('lev'): 'cts:urn:greekLit:tlg0527.tlg003',
         ('num'): 'cts:urn:greekLit:tlg0527.tlg004',
         ('deu'): 'cts:urn:greekLit:tlg0527.tlg005',
         ('jos'): 'cts:urn:greekLit:tlg0527.tlg006',
         ('jdg'): 'cts:urn:greekLit:tlg0527.tlg008',
         ('rut'): 'cts:urn:greekLit:tlg0527.tlg010',
         ('1ki'): 'cts:urn:greekLit:tlg0527.tlg011',
         ('2ki'): 'cts:urn:greekLit:tlg0527.tlg012',
         ('3ki'): 'cts:urn:greekLit:tlg0527.tlg013',
         ('4ki'): 'cts:urn:greekLit:tlg0527.tlg014',
         ('1ch'): 'cts:urn:greekLit:tlg0527.tlg015',
         ('2ch'): 'cts:urn:greekLit:tlg0527.tlg016',
         ('1es'): 'cts:urn:greekLit:tlg0527.tlg017',
         ('2es'): 'cts:urn:greekLit:tlg0527.tlg018',
         ('est'): 'cts:urn:greekLit:tlg0527.tlg019',
         ('judith'): 'cts:urn:greekLit:tlg0527.tlg020',
         ('tob'): 'cts:urn:greekLit:tlg0527.tlg021',
         ('1mac'): 'cts:urn:greekLit:tlg0527.tlg023',
         ('2mac'): 'cts:urn:greekLit:tlg0527.tlg024',
         ('3mac'): 'cts:urn:greekLit:tlg0527.tlg025',
         ('4mac'): 'cts:urn:greekLit:tlg0527.tlg026',
         ('psalms'): 'cts:urn:greekLit:tlg0031.tlg027',
         ('odes'): 'cts:urn:greekLit:tlg0527.tlg028',
         ('proverbs'): 'cts:urn:greekLit:tlg0527.tlg029',
         ('ecclesiastes'): 'cts:urn:greekLit:tlg0527.tlg030',
         ('canticum'): 'cts:urn:greekLit:tlg0527.tlg031',
         ('job'): 'cts:urn:greekLit:tlg0527.tlg032',
         ('wissol'): 'cts:urn:greekLit:tlg0527.tlg033',
         ('sirach'): 'cts:urn:greekLit:tlg0527.tlg034',
         ('pssol'): 'cts:urn:greekLit:tlg0527.tlg035',
         ('hosea'): 'cts:urn:greekLit:tlg0527.tlg036',
         ('amos'): 'cts:urn:greekLit:tlg0527.tlg037',
         ('micha'): 'cts:urn:greekLit:tlg0527.tlg038',
         ('joel'): 'cts:urn:greekLit:tlg0527.tlg039',
         ('obadiah'): 'cts:urn:greekLit:tlg0527.tlg040',
         ('jonah'): 'cts:urn:greekLit:tlg0527.tlg041',
         ('nahum'): 'cts:urn:greekLit:tlg0527.tlg042',
         ('habakkuk'): 'cts:urn:greekLit:tlg0527.tlg043',
         ('zephaniah'): 'cts:urn:greekLit:tlg0527.tlg044',
         ('haggai'): 'cts:urn:greekLit:tlg0527.tlg045',
         ('zachariah'): 'cts:urn:greekLit:tlg0527.tlg046',
         ('malachiah'): 'cts:urn:greekLit:tlg0527.tlg047',
         ('isaiah'): 'cts:urn:greekLit:tlg0527.tlg048',
         ('jeremiah'): 'cts:urn:greekLit:tlg0527.tlg049',
         ('baruch'): 'cts:urn:greekLit:tlg0527.tlg050',
         ('lamentations'): 'cts:urn:greekLit:tlg0527.tlg051',
         ('epjer'): 'cts:urn:greekLit:tlg0031.tlg052',
         ('ezechiel'): 'cts:urn:greekLit:tlg0527.tlg053',
         ('susanna'): 'cts:urn:greekLit:tlg0527.tlg054',
         ('daniel'): 'cts:urn:greekLit:tlg0527.tlg056',
         ('bel'): 'cts:urn:greekLit:tlg0527.tlg058'}
    root = etree.parse(orig).getroot()
    ns = {'tei': 'http://www.tei-c.org/ns/1.0'}
    for b in root.xpath('//tei:bibl', namespaces=ns):
        cor = b.get('corresp').split()
        for i, x in enumerate(cor):
            try:
                cor[i] = ':'.join([d[x.split(':')[0]], x.split(':')[1]])
            except:
                continue
        cor = ' '.join(cor)
        b.set('corresp', cor)
    return root
